# CI triggered on commit
matrix:
  platform:
    - linux/amd64
    - linux/arm64 

platform: ${platform}

pipeline:
  build:
    image: debian:stable
    commands:
      - apt update
      - yes | apt install curl 
      # Install rustup
      - curl https://sh.rustup.rs -sSf | sh -s -- -y
      # Source cargo env
      - source "$HOME/.cargo/env"
      # Install stable rust toolchain
      - rustup install stable
      # Build crate
      - cargo build --release
